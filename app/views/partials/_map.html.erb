<section id="maps">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-9 col-sm-12 px-0 map-container">
        <div id="map" class="map-responsive"></div>
      </div>

      <div class="col-lg-3 related-topics pt-3">
        <h4 class="top-adventures">Top adventures near mount kinabalu climb</h4>
          <div class="container-fluid">
            <div class="row align-items-center overflow-single pb-3">
              <div class="col-lg-4 pl-0">
                 <img src='<%= asset_path "map/tree-2069715.svg" %>'>
                 <div class="travel-pic">
                   <i class="fas fa-heart"></i>
                   <span>Traveller’s Pick!</span>
                 </div>
              </div>
              <div class="col-lg-8 px-0">
                <h3 class="first-map-title">1. Kiulu White Water Rafting</h3>
                <div class="row">
                  <div class="col-lg-6">
                    <i class="fas fa-star"></i>
                    <span class="pl-2 stars">4.93</span>
                    <span class="stars-number stars">(58)</span>
                  </div>
                  <div class="col-lg-6">
                    <i class="far fa-map-marker-alt"></i>
                    <span class="miles pl-1">2km away</span>
                  </div>
                  <div class="col-lg-12">
                    <i class="far fa-clock"></i>
                    <span class="pl-2 published-date">0.5 day to 3 days</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="container-fluid">
            <div class="row align-items-center overflow-single pb-3">
            <div class="col-lg-4 pl-0">
              <img src='<%= asset_path "map/tree-2069715.svg" %>'>
              <div class="bucket-list">
                <i class="fal fa-map-marker"></i>
                <span>Bucketlist</span>
              </div>
            </div>
            <div class="col-lg-8 px-0">
            <h3>2. Danum Valley Trek</h3>
            <div class="row">
              <div class="col-lg-6">
                <i class="fas fa-star"></i>
                <span class="pl-2 stars">4.93</span>
                <span class="stars-number stars">(58)</span>
              </div>
              <div class="col-lg-6">
                <i class="far fa-map-marker-alt"></i>
                <span class="miles pl-1">2km away</span>
              </div>
              <div class="col-lg-12">
                <i class="far fa-clock"></i>
                <span class="pl-2 published-date">0.5 day to 3 days</span>
              </div>
          </div>
            </div>
          </div>
        </div>
          <div class="container-fluid">
            <div class="row align-items-center overflow-single pb-3">
              <div class="col-lg-4 pl-0">
                <img src='<%= asset_path "map/tree-2069715.svg" %>'>
              </div>
              <div class="col-lg-8 px-0">
                <h3>3. Mabul Dives</h3>
                <div class="row">
                  <div class="col-lg-6">
                    <i class="fas fa-star"></i>
                    <span class="pl-2 stars">4.93</span>
                    <span class="stars-number stars">(58)</span>
                  </div>
                  <div class="col-lg-6">
                    <i class="far fa-map-marker-alt"></i>
                    <span class="miles pl-1">2km away</span>
                  </div>
                  <div class="col-lg-12">
                    <i class="far fa-clock"></i>
                    <span class="pl-2 published-date">0.5 day to 3 days</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="container-fluid">
            <div class="row align-items-center overflow-single pb-3">
              <div class="col-lg-4 pl-0">
                <img src='<%= asset_path "map/tree-2069715.svg" %>'>
              </div>
              <div class="col-lg-8 px-0">
                <h3>4. Kinabalu Snorkelling</h3>
                <div class="row">
                  <div class="col-lg-6">
                    <i class="fas fa-star"></i>
                    <span class="pl-2 stars">4.93</span>
                    <span class="stars-number stars">(58)</span>
                  </div>
                  <div class="col-lg-6">
                    <i class="far fa-map-marker-alt"></i>
                    <span class="miles pl-1">2km away</span>
                  </div>
                  <div class="col-lg-12">
                    <i class="far fa-clock"></i>
                    <span class="pl-2 published-date">0.5 day to 3 days</span>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <div class="container-fluid">
            <div class="row align-items-center overflow-single pb-3 border-0">
              <div class="col-lg-4 pl-0">
                <img src='<%= asset_path "map/tree-2069715.svg" %>'>
              </div>
              <div class="col-lg-8 px-0 map-contents">
                <h3>5. Kinabalu Dives</h3>
                <div class="row">
                  <div class="col-lg-6">
                    <i class="fas fa-star"></i>
                    <span class="pl-2 stars">4.93</span>
                    <span class="stars-number stars">(58)</span>
                  </div>
                  <div class="col-lg-6">
                    <i class="far fa-map-marker-alt"></i>
                    <span class="miles pl-1">2km away</span>
                  </div>
                  <div class="col-lg-12">
                    <i class="far fa-clock"></i>
                    <span class="pl-2 published-date">0.5 day to 3 days</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <p class="view-all-adventures pt-2 px-3">View all adventures in Sabah, Malaysia <i class="fal fa-chevron-right"></i></p>
          </div>

      </div>
    </div>
  </div>
</section>
<script>
  var markers = [];
  var locations = [
    [1,'Title 1', 41.338, 19.788],
    [2,'Title 2', 41.380, 19.8165],
    [3,'Title 3', 41.345, 19.8152],
    [4,'Title 4', 41.300, 19.9200]
  ];
  var contentString = '<div id="content">'+
    '<div id="map-carousel-indicators" class="carousel slide" data-ride="carousel">'+
      '<ol class="carousel-indicators">'+
      '  <li data-target="#map-carousel-indicators" data-slide-to="0" class="active"></li>'+
      '  <li data-target="#map-carousel-indicators" data-slide-to="1"></li>'+
      '  <li data-target="#map-carousel-indicators" data-slide-to="2"></li>'+
      '  <li data-target="#map-carousel-indicators" data-slide-to="3"></li>'+
      '  <li data-target="#map-carousel-indicators" data-slide-to="4"></li>'+
      '  <li data-target="#map-carousel-indicators" data-slide-to="5"></li>'+
      '</ol>'+
      '<div class="carousel-inner">'+
      '  <div class="carousel-item active">'+
          '<img src="<%= asset_path "magazines/first-image.svg" %>" class="d-block w-100">'+
        '</div>'+
      '  <div class="carousel-item">'+
          '<img src="<%= asset_path "magazines/first-image.svg" %>" class="d-block w-100">'+
      '  </div>'+
      '  <div class="carousel-item">'+
          '<img src="<%= asset_path "magazines/first-image.svg" %>" class="d-block w-100">'+
      '  </div>'+
      '  <div class="carousel-item">'+
          '<img src="<%= asset_path "magazines/first-image.svg" %>" class="d-block w-100">'+
      '  </div>'+
      '  <div class="carousel-item">'+
          '<img src="<%= asset_path "magazines/first-image.svg" %>" class="d-block w-100">'+
      '  </div>'+
      '  <div class="carousel-item">'+
          '<img src="<%= asset_path "magazines/first-image.svg" %>" class="d-block w-100">'+
      '  </div>'+
      '</div>'+
    '</div>'+
      '<div class="description-container">'+
        '<h1 id="firstHeading" class="firstHeading">Kiulu White Water Rafting</h1>'+
        '<div id="bodyContent">'+
        'Meander down the river with friends.'+
        '<p><span class="dollars-currency">$</span> From US$31</p>'+
        '<span class="map-category"><i class="fas fa-heart"></i> Traveller’s Pick!</span>'+
      '</div>'+
    '</div>'+
  '</div>';

function initMap() {
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 12,
    center: {lat: 41.327546, lng: 19.818698}
  });

  setMarkers(map);
}

function setMarkers(map) {
  for (var i = 0; i < locations.length; i++) {
    var location = locations[i];
    var locationInfowindow = new google.maps.InfoWindow({
      content: contentString,
    });

    var marker = new google.maps.Marker({
      position: {lat: location[2], lng: location[3]},
      map: map,
      title: location[1],
      infowindow: locationInfowindow,
      icon: "http://localhost:3000/images/markers/numerize-"+location[0]+".svg"
    });

    markers.push(marker);

    google.maps.event.addListener(marker, 'click', function() {
      hideAllInfoWindows(map);
      this.infowindow.open(map, this);
    });

  }
}

function hideAllInfoWindows(map) {
   markers.forEach(function(marker) {
     marker.infowindow.close(map, marker);
  });
}
</script>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA0s1a7phLN0iaD6-UE7m4qP-z21pH0eSc&q&callback=initMap">
</script>
